# برنامج إدارة فواتير الكهرباء

نظام شامل لإدارة المشتركين والمحصلين والتقارير المالية باستخدام Firebase كخدمة سحابية.

## المميزات

- **إدارة المشتركين**: تسجيل وإدارة بيانات المشتركين
- **إدارة المحصلين**: متابعة أداء المحصلين ودفاتر السندات
- **إدارة السندات**: إدخال ومتابعة السندات والمدفوعات
- **التقارير المالية**: تقارير تفصيلية وتجميعية شاملة
- **النسخ الاحتياطي**: حفظ البيانات وتصديرها بأمان
- **واجهة متجاوبة**: متوافق مع الجوال والكمبيوتر
- **نظام صلاحيات**: مدير النظام وعارض التقارير

## التقنيات المستخدمة

- **الواجهة الأمامية**: HTML5, CSS3, JavaScript (ES6+)
- **قاعدة البيانات**: Firebase Firestore
- **المصادقة**: Firebase Authentication
- **التخزين**: Firebase Storage
- **التصميم**: CSS Grid, Flexbox, Responsive Design

## هيكل المشروع

```
project-root/
├── index.html              # الصفحة الرئيسية
├── login.html              # صفحة تسجيل الدخول
├── dashboard.html          # لوحة التحكم
├── settings.html           # صفحة الإعدادات
├── subscribers.html        # إدارة المشتركين
├── collectors.html         # إدارة المحصلين
├── receipts.html           # إدارة السندات
├── reports/                # مجلد التقارير
│   ├── report-daily.html
│   ├── report-monthly.html
│   ├── report-yearly.html
│   ├── report-yearly-total.html
│   └── report-lastpayment.html
├── assets/                 # الموارد
│   ├── css/
│   │   └── styles.css
│   └── js/
│       ├── firebase-config.js
│       ├── db-init.js
│       ├── auth-init.js
│       ├── backup-service.js
│       ├── import-excel.js
│       ├── reports-service.js
│       ├── receipts-service.js
│       └── utils.js
├── backups/                # النسخ الاحتياطية
└── README.md
```

## إعداد Firebase

1. **إنشاء مشروع Firebase**:
   - اذهب إلى [Firebase Console](https://console.firebase.google.com/)
   - أنشئ مشروع جديد
   - فعّل Firestore Database
   - فعّل Authentication
   - فعّل Storage

2. **الحصول على إعدادات المشروع**:
   - في إعدادات المشروع، انسخ إعدادات Firebase
   - استبدل القيم في `assets/js/firebase-config.js`

3. **إعداد قواعد Firestore**:
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Allow read/write access to authenticated users
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
  }
}
```

4. **إعداد قواعد Authentication**:
   - فعّل تسجيل الدخول بالبريد الإلكتروني وكلمة المرور
   - أضف المستخدمين المصرح لهم

## التشغيل المحلي

1. **استضافة الملفات**:
   ```bash
   # استخدم خادم HTTP بسيط
   python -m http.server 8000
   # أو
   npx serve .
   ```

2. **فتح التطبيق**:
   - اذهب إلى `http://localhost:8000`
   - سجل الدخول باستخدام حساب Firebase

## الاستضافة

### Firebase Hosting
```bash
npm install -g firebase-tools
firebase login
firebase init hosting
firebase deploy
```

### استضافة أخرى
- ارفع جميع الملفات إلى خادم الويب
- تأكد من أن Firebase مُعدّ بشكل صحيح

## استخدام النظام

### تسجيل الدخول
- استخدم بريد إلكتروني وكلمة مرور صحيحة
- سيتم توجيهك إلى لوحة التحكم

### إدارة المشتركين
- إضافة مشتركين جدد يدوياً أو عبر Excel
- البحث والتعديل والحذف
- عرض قائمة شاملة بالمشتركين

### إدارة المحصلين
- إضافة محصلين جدد
- تتبع دفاتر السندات
- متابعة الأرصدة الافتتاحية

### إدارة السندات
- إدخال سندات التحصيل
- التحقق من التسلسل
- معالجة السندات المفقودة أو التالفة

### التقارير
- تقارير يومية تفصيلية
- تقارير شهرية تجميعية
- تقارير سنوية
- تقرير آخر سداد للمشترك

### النسخ الاحتياطي
- تصدير البيانات بصيغة JSON أو CSV
- حفظ النسخ محلياً

## الصلاحيات

### مدير النظام (Admin)
- جميع العمليات
- إضافة وتعديل وحذف البيانات
- عرض جميع التقارير
- إدارة المستخدمين

### عارض التقارير (Viewer)
- عرض التقارير فقط
- لا يمكن تعديل البيانات

## استكشاف الأخطاء

### مشاكل Firebase
- تأكد من صحة إعدادات Firebase
- تحقق من قواعد Firestore
- تأكد من تفعيل الخدمات المطلوبة

### مشاكل التصميم
- تأكد من تحميل ملفات CSS
- تحقق من استجابة التصميم على الأجهزة المختلفة

### مشاكل JavaScript
- افتح أدوات المطور في المتصفح
- تحقق من رسائل الخطأ في Console

## المساهمة

لتطوير النظام أو إضافة مميزات جديدة:

1. انسخ المشروع
2. أضف التحسينات المطلوبة
3. اختبر التغييرات
4. أرسل طلب دمج

## الدعم

للحصول على المساعدة أو الإبلاغ عن مشاكل، يرجى التواصل مع فريق التطوير.

## الترخيص

هذا المشروع مرخص تحت رخصة MIT - راجع ملف LICENSE للتفاصيل.

