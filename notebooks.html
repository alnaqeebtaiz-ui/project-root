<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إدارة الدفاتر | نظام الفواتير</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
    <div class="sidebar">
        <h2>نظام الفواتير</h2>
        <nav>
            <ul>
                <li><a href="dashboard.html"><i class="fas fa-tachometer-alt"></i> لوحة التحكم</a></li>
                <li><a href="subscribers.html"><i class="fas fa-users"></i> المشتركين</a></li>
                <li><a href="collectors.html"><i class="fas fa-user-tie"></i> المحصلين</a></li>
                <li><a href="receipts.html"><i class="fas fa-receipt"></i> السندات</a></li>
                <li><a href="deposits.html"><i class="fas fa-cash-register"></i> التوريد</a></li>
                <li class="active"><a href="notebooks.html"><i class="fas fa-book-open"></i> الدفاتر</a></li>
                <li><a href="reports/report-daily.html"><i class="fas fa-chart-line"></i> التقارير</a></li>
                <li><a href="settings.html"><i class="fas fa-cog"></i> الإعدادات</a></li>
            </ul>
        </nav>
    </div>
    <div class="main-content">
        <header>
            <h1>إدارة وتتبع الدفاتر</h1>
        </header>
        <main class="container">
            <div class="card">
                <div class="card-header">
                    <h3>قائمة الدفاتر</h3>
                    <button id="sync-btn" class="btn btn-primary">
                        <i class="fas fa-sync-alt"></i> تحديث ومزامنة الدفاتر
                    </button>
                </div>
                <div class="card-body" id="notebooks-container">
                    <!-- سيتم تحميل البيانات هنا -->
                </div>
            </div>
        </main>
    </div>

    <!-- Modal for editing missing receipt -->
    <div id="edit-missing-receipt-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>تعديل حالة السند المفقود</h2>
            <form id="edit-missing-receipt-form">
                <input type="hidden" id="modal-notebook-id">
                <input type="hidden" id="modal-receipt-number">
                <div class="form-group">
                    <label for="receipt-number-display">رقم السند</label>
                    <input type="text" id="receipt-number-display" disabled>
                </div>
                <div class="form-group">
                    <label for="missing-status">الحالة</label>
                    <select id="missing-status" required>
                        <option value="مفقود">مفقود</option>
                        <option value="ملغي">ملغي</option>
                        <option value="تالف">تالف</option>
                        <option value="خطأ إدخال">خطأ إدخال</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="missing-notes">ملاحظات</label>
                    <textarea id="missing-notes" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">حفظ التغييرات</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class=""></div>

    <!-- === الترتيب الصحيح لاستدعاء السكربتات === -->
    <script src="assets/js/utils.js"></script>
    <script src="assets/js/notebooks-service.js"></script>
</body>
</html>
